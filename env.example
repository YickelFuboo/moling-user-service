# =============================================================================
# User-Service 环境配置模板
# =============================================================================
# 复制此文件为 .env 并根据实际环境修改配置

# =============================================================================
# 基础配置
# =============================================================================
SERVICE_HOST=0.0.0.0
SERVICE_PORT=8001

DEBUG=true
APP_LOG_LEVEL=WARNING

# =============================================================================
# 数据库配置
# =============================================================================
# 数据库类型: postgresql 或 mysql
DATABASE_TYPE=postgresql
# 数据库名称
DB_NAME=knowledge_service
# 数据库连接池配置
DB_POOL_SIZE=10
DB_MAX_OVERFLOW=20

# PostgreSQL 配置
POSTGRESQL_HOST=localhost
POSTGRESQL_PORT=5432
POSTGRESQL_USER=postgres
POSTGRESQL_PASSWORD=your_password

# MySQL 配置 (如果使用MySQL)
MYSQL_HOST=localhost
MYSQL_PORT=3306
MYSQL_USER=root
MYSQL_PASSWORD=your_password

# =============================================================================
# Redis 配置
# =============================================================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=
REDIS_SSL=false
REDIS_DECODE_RESPONSES=true
REDIS_SOCKET_CONNECT_TIMEOUT=5
REDIS_SOCKET_TIMEOUT=5
REDIS_RETRY_ON_TIMEOUT=true
REDIS_MAX_CONNECTIONS=10

# =============================================================================
# 文件存储配置
# =============================================================================
# 存储类型: minio, s3, local, azure_sas
STORAGE_TYPE=minio

# MinIO 配置 (推荐用于开发环境)
MINIO_ENDPOINT=localhost:9000
MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=your_secret_key
MINIO_SECURE=false

# S3 配置
S3_REGION=us-east-1
S3_ENDPOINT_URL=https://your-s3-endpoint.com  # 必需，指定S3兼容服务的端点
S3_ACCESS_KEY_ID=your_access_key
S3_SECRET_ACCESS_KEY=your_secret_key
S3_USE_SSL=false

# 本地存储配置 (简单文件存储)
LOCAL_UPLOAD_DIR=./uploads

# Azure Blob Storage SAS配置
AZURE_ACCOUNT_URL=https://yourstorageaccount.blob.core.windows.net
AZURE_SAS_TOKEN=your_sas_token

# Azure Blob Storage SPN配置
AZURE_SPN_ACCOUNT_URL=https://yourstorageaccount.dfs.core.windows.net
AZURE_SPN_CLIENT_ID=your_client_id
AZURE_SPN_CLIENT_SECRET=your_client_secret
AZURE_SPN_TENANT_ID=your_tenant_id
AZURE_SPN_CONTAINER_NAME=your_container

# 阿里云OSS配置
OSS_ACCESS_KEY=your_access_key
OSS_SECRET_KEY=your_secret_key
OSS_ENDPOINT_URL=https://oss-cn-hangzhou.aliyuncs.com
OSS_REGION=cn-hangzhou
OSS_PREFIX_PATH=


# =============================================================================
# JWT 认证配置
# =============================================================================
# 请在生产环境中使用强密钥
JWT_SECRET_KEY=your-secret-key
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7


# =============================================================================
# OAuth 配置
# =============================================================================
# 启用OAuth功能
OAUTH_ENABLED=true

# OAuth基础URL配置（自动使用SERVICE_PORT）
OAUTH_BASE_URL=http://localhost:${SERVICE_PORT}

# GitHub OAuth配置
GITHUB_CLIENT_ID=your-github-client-id
GITHUB_CLIENT_SECRET=your-github-client-secret
GITHUB_REDIRECT_URI=${OAUTH_BASE_URL}/api/v1/oauth/github/callback

# Google OAuth配置
GOOGLE_CLIENT_ID=your-google-client-id
GOOGLE_CLIENT_SECRET=your-google-client-secret
GOOGLE_REDIRECT_URI=${OAUTH_BASE_URL}/api/v1/oauth/google/callback

# 微信OAuth配置
WECHAT_APP_ID=your-wechat-app-id
WECHAT_APP_SECRET=your-wechat-app-secret
WECHAT_REDIRECT_URI=${OAUTH_BASE_URL}/api/v1/oauth/wechat/callback

# 支付宝OAuth配置
ALIPAY_APP_ID=your-alipay-app-id
ALIPAY_PRIVATE_KEY=your-alipay-private-key
ALIPAY_PUBLIC_KEY=your-alipay-public-key
ALIPAY_REDIRECT_URI=${OAUTH_BASE_URL}/api/v1/oauth/alipay/callback

# OIDC配置（企业SSO）
OIDC_CLIENT_ID=your-oidc-client-id
OIDC_CLIENT_SECRET=your-oidc-client-secret
OIDC_REDIRECT_URI=${OAUTH_BASE_URL}/api/v1/oauth/oidc/callback
OIDC_ISSUER=https://your-company.com/oidc

# =============================================================================
# 短信服务配置（用于手机号注册）
# =============================================================================
SMS_PROVIDER=aliyun  # aliyun, tencent
SMS_ACCESS_KEY_ID=your-sms-access-key
SMS_ACCESS_KEY_SECRET=your-sms-secret-key
SMS_SIGN_NAME=your-sms-sign-name
SMS_TEMPLATE_CODE=your-sms-template-code

# =============================================================================
# 邮件服务配置（用于邮箱验证）
# =============================================================================
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_USERNAME=your-email@gmail.com
EMAIL_PASSWORD=your-email-password
EMAIL_USE_TLS=true
EMAIL_FROM=your-email@gmail.com